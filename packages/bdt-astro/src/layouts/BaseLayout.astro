---
import Nav from "@components/nav/nav";
import { AstroLogo } from "../components/AstroLogo";
import { ViewTransitions } from "astro:transitions";

const { title } = Astro.props;
const path = new URL(Astro.url.pathname, Astro.site);
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <title>{title}</title>
    <ViewTransitions />

    <!-- TODO: make dynamic :D -->
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ¥ª</text></svg>"
    />

    <!-- TODO: delete me -->
    <link
      href="https://fonts.googleapis.com/css2?family=Actor&display=swap"
      rel="stylesheet"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Hind+Madurai:wght@300&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />

    <style lang="scss" is:global>
      @use "../../../bdt-components/src/styles/style.scss";
      @use "../../public/style/global.scss";
    </style>
    <slot name="head_after" />
  </head>
  <body>
    <!-- TODO: Fix this DIVitus -->
    <div class="shell">
      <div class="">
        <div>
          <div>
            <main class="stack">
              <!-- TODO: delete logo and tidy up -->
              <!-- <AstroLogo client:load /> -->
              <Nav url={path} />
              <!-- TODO: style me/fix me -->
              <p>Simon Scarfe writes here sometimes</p>
              <slot />
              <footer>
                <!-- TODO: do something with this -->
                <span class="footer-item">
                  <a
                    rel="license"
                    href="http://creativecommons.org/licenses/by-sa/3.0/"
                  >
                    <img
                      alt="This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 Unported License"
                      src="https://i.creativecommons.org/l/by-sa/3.0/80x15.png"
                      width="80"
                      height="15"
                    />
                  </a>
                </span>

                <span class="footer-item">&copy; Simon Scarfe 2007-2022</span>
              </footer>
            </main>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
