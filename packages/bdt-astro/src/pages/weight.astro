---
import BaseLayout from '../layouts/BaseLayout.astro'
import getAllWeighins from "@weight-fetcher/getAllWeighins.ts";
import WeightChart from '@components/visualisations/weight-graph.tsx';

const weighins = await getAllWeighins();
let weekAgo = new Date();
weekAgo.setDate(new Date().getDate() - 7);
---

<BaseLayout title="Weighins">
  <div class="stack listing">
    <h1>Weighins</h1>
    <WeightChart client:load weighins={weighins} filter={{from: weekAgo.toISOString(), displayDatesAtATime: 7}} />
    <div class="content">
      <p>This is how I'm currently doing weight-wise. Consider it a first draft. The nav is funky, and it's a bit limited in what it shows. But it's a start.</p>
    </div>
  </div>
</BaseLayout>
    