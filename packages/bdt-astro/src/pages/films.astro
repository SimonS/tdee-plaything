---
import BaseLayout from '../layouts/BaseLayout.astro'
import Pagination from "@components/pagination/pagination.tsx";
import { FilmEntry } from "../components/FilmEntry.tsx";
import getFilms from "@film-fetcher/getFilms.ts";

const {films, meta} = await getFilms();
---

<BaseLayout title="Films I've seen recently">
  <div class="stack listing">
    <h1>Films</h1>
    
    <div class="content">
      <p>These are films I've watched recently, as logged in <a href="https://letterboxd.com/simonscarfe/">Letterboxd</a>.</p>
    </div>

    {films.map(film => <FilmEntry film={film} />)}

    <Pagination tag={`a`} pageNumber={1} urlRoot={`/films/page`} pageInfo={{hasNextPage: meta.hasNextPage, hasPreviousPage: meta.hasPreviousPage}} />
  </div>
</BaseLayout>
    